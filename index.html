<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>検定合格情報デモ（リセット機能付き）</title>
</head>
<body>

    <h1>ウェブサイト検定</h1>
    
    <div id="result-area">
        </div>

    <button id="pass-button">検定に合格する</button>
    <button id="reset-button" style="display:none;">合格情報を取り消す (リセット)</button>

    <script>
        // --- 1. 定数とDOM要素の定義 ---
        const STORAGE_KEY = 'isExamPassed'; 
        const resultArea = document.getElementById('result-area');
        const passButton = document.getElementById('pass-button');
        const resetButton = document.getElementById('reset-button'); // リセットボタンの要素を取得

        // --- 2. ページ読み込み時の処理 (情報の「再取得・表示」) ---
        function displayResult() {
            const savedValue = localStorage.getItem(STORAGE_KEY);

            if (savedValue === 'true') {
                // 合格している場合
                resultArea.innerHTML = '<h2>🎉 合格！ 🎉</h2>';
                passButton.style.display = 'none'; // 合格ボタンを非表示
                resetButton.style.display = 'inline'; // リセットボタンを表示
            } else {
                // 合格していない場合
                resultArea.innerHTML = '<h2>まだ合格していません</h2>';
                passButton.style.display = 'inline'; // 合格ボタンを表示
                resetButton.style.display = 'none'; // リセットボタンを非表示
            }
        }

        // --- 3. 合格ボタンクリック時の処理 (情報の「保存」) ---
        passButton.addEventListener('click', () => {
            // Local Storageに合格情報（'true'）を保存
            localStorage.setItem(STORAGE_KEY, 'true');
            
            // 画面表示を更新
            displayResult();
            
            alert('合格情報をブラウザに保存しました！');
        });

        // --- 4. リセットボタンクリック時の処理 (情報の「削除」) ---
        resetButton.addEventListener('click', () => {
            // Local Storageから指定したキー（isExamPassed）のデータだけを削除する
            // *これが合格情報を消去する処理です*
            localStorage.removeItem(STORAGE_KEY); 
            
            // 画面表示を更新 (これにより「まだ合格していません」に戻る)
            displayResult();
            
            alert('合格情報が取り消されました！ページを更新しても情報が消えていることを確認してください。');
        });

        // ページが読み込まれたら、まず結果を表示する
        displayResult();

    </script>
</body>
</html>
